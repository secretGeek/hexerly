(function(){var TILE_WIDTH,TILE_HEIGHT,SCALE,HEX_SLOPE,hexPoints,hexInnerPoints;SCALE=1.0;TILE_WIDTH=21*SCALE;TILE_HEIGHT=24*SCALE;HEX_SLOPE=12.0/7.0;hexPoints=[];hexPoints[0]=[7,0];hexPoints[1]=[20,0];hexPoints[2]=[27,12];hexPoints[3]=[20,23];hexPoints[4]=[7,23];hexPoints[5]=[0,12];hexPoints[6]=hexPoints[0];hexInnerPoints=[];hexInnerPoints[0]=[8,1];hexInnerPoints[1]=[20,1];hexInnerPoints[2]=[26.5,12];hexInnerPoints[3]=[20,23];hexInnerPoints[4]=[8,23];hexInnerPoints[5]=[1.5,12];hexInnerPoints[6]=hexInnerPoints[0];this.drawHex=function(c,xOffset,yOffset,fillColor,borderColor){if(c===undefined){alert("No C!");}
var i,gradient;c.beginPath();c.moveTo((hexPoints[0][0]+xOffset)*SCALE,(hexPoints[0][1]+yOffset)*SCALE);for(i=0;i<6;i=i+1){c.lineTo((hexPoints[i+1][0]+xOffset)*SCALE,(hexPoints[i+1][1]+yOffset)*SCALE);}
c.closePath();c.strokeStyle=borderColor;c.shadowBlur=2*SCALE;c.shadowColor="#222";c.stroke();if(fillColor!==undefined){gradient=c.createLinearGradient(xOffset+7,yOffset,xOffset+27,yOffset+23);gradient.addColorStop(0.0,fillColor);gradient.addColorStop(1.0,"#222");c.fillStyle=gradient;c.fill();}};this.drawHexBorder=function(c,xOffset,yOffset,borderColors){if(c===undefined){alert("No C!");}
var i;for(i=0;i<6;i=i+1){c.beginPath();c.moveTo((hexInnerPoints[i][0]+xOffset)*SCALE,(hexInnerPoints[i][1]+yOffset)*SCALE);c.lineTo((hexInnerPoints[i+1][0]+xOffset)*SCALE,(hexInnerPoints[i+1][1]+yOffset)*SCALE);c.strokeStyle=borderColors[i];c.closePath();c.stroke();}};this.columnRowToXY=function(column,row){return[(column-1)*TILE_WIDTH,(row-1)*TILE_HEIGHT+((column)%2*(TILE_HEIGHT/2))];};this.xyToColumnRow=function(x,y){x=x+TILE_WIDTH;y=y+TILE_HEIGHT;var gX,gY,fX,fY,column,row;gX=Math.floor(x/TILE_WIDTH);gY=Math.floor(y/TILE_HEIGHT);fX=(x/TILE_WIDTH)-gX;fY=(y/TILE_HEIGHT)-gY;if((Math.abs(gX)&1)===1){if(fY>0.5){if(1.0-fX*HEX_SLOPE<fY){column=gX;row=gY;}
else{column=gX-1;row=gY;}}else{if(fX*HEX_SLOPE>fY){column=gX;row=gY-1;}else{column=gX-1;row=gY;}}}
else{if(fY>0.5){if(fY-0.5<fX*HEX_SLOPE){column=gX;row=gY;}else{column=gX-1;row=gY;}}else{if(fY-0.5>fX*HEX_SLOPE*-1){column=gX;row=gY;}else{column=gX-1;row=gY-1;}}}
return[column,row];};})();